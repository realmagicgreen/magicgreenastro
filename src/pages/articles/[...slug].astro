---
import { CollectionEntry, getCollection } from "astro:content";
import Article from "@layouts/Article.astro";

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const articles = await getCollection("articles", ({ data }) => {
    return !data.draft && data.pubDate < new Date();
  });
  return articles.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

interface Props {
  post: CollectionEntry<'articles'>;
}

// 2. When it's time to render, you can get the entry directly from the prop
const { post } = Astro.props;
const { Content } = await post.render();
const cssBodyClass = ""
const cssClass = ""

---

<Article {...post.data} cssBodyClass={cssBodyClass} cssClass={cssClass}>
  <ul class="tags">
    {
      post.data.tags.map((tag) => {
        return (
          <li>
            <a class="sanchez" href={`/articles/${tag.toLowerCase()}/`}>
              {tag}
            </a>
          </li>
        );
      })
    }
  </ul>

  <Content />

</Article>

<style lang="scss">
  .nav {
    padding: 5rem 1rem 1rem 1rem !important;
    padding-top: 5rem;
  }
  .nav_items a {
    height: 48px;
    display: block;
  }
  .nav_title {
    padding-bottom: 0.5rem;
  }
  .tags {
    max-width: none !important;
    li {
      display: inline-block;
      padding-right: 1rem;
    }
  }

  .post_content ul li {
    list-style-type: none !important;
  }
</style>
